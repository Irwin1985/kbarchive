<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q161777: SNA Server/SnaBase Traps Receive Invalid Client Logon Message | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q161777: SNA Server/SnaBase Traps Receive Invalid Client Logon Message" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/161/Q161777/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/161/Q161777/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q161777: SNA Server/SnaBase Traps Receive Invalid Client Logon Message","url":"http://jeffpar.github.io/kbarchive/kb/161/Q161777/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q161777-sna-serversnabase-traps-receive-invalid-client-logon-message">Q161777: SNA Server/SnaBase Traps Receive Invalid Client Logon Message</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q161777
Product(s): Microsoft SNA Server
Version(s): WINDOWS:2.0,2.1,2.11
Operating System(s): 
Keyword(s): 
Last Modified: 12-JUN-2001

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft SNA Server, versions 2.0, 2.1, 2.11 
-------------------------------------------------------------------------------


SYMPTOMS
========

The SNA Server or SnaBase process will encounter an access violation (AV) when
receiving a badly formatted client logon challenge message. This leads to the
following problems:

- Users with active sessions may find that their computers stop responding and
  eventually they lose their host sessions. New users will be unable to connect
  through SNA Server until the computer running SNA Server is restarted.

- The following Windows NT application event log message occurs:

  Event ID: 624
  Source: SNA Server
  Creating dump file C:\SNA\traces\snadump.log for SNASERVR.DBG

- A Drwtsn32.log entry is created that indicates an application exception error
  occurred in Snaservr.dbg:

  

     Application exception occurred:
          App: snaservr.DBG (pid=&lt;process ID&gt;)  (or snabase.DBG)
          Exception number: c0000005 (access violation)

     State Dump for Thread Id &lt;thread ID&gt;

     eax=0000002a ebx=00000000 ecx=00000000 edx=00000000 esi=01213463
     edi=0000002a
     eip=00ab956b esp=4cd4fa14 ebp=62f5002a iopl=0         nv up ei pl nz
     na pe nc
     cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000
     efl=00000202

     function: GetSecField
     [...]
     FAULT -&gt;00ab956b 0fbf4206   movsx eax,word ptr [edx+0x6]
     ds:005de923=????

The SNA Server service must be restarted to recover. If an SnaBase failure
occurs, both the SnaBase and SNA Server services must be restarted to recover.

CAUSE
=====

The cause of the improperly formatted client logon challenge message is unknown.
The person who experienced this problem was using SNA Server 2.1 Windows 3.x
client computers with a third-party (Korean) TCP/IP protocol stack. SNA Server
did not expect such an invalid message to be received from a client computer,
causing the server to attempt to process the message without validating the
format. This led to an SNA Server access violation.

STATUS
======

Microsoft has confirmed this to be a problem in SNA Server version 2.11. This
problem has been corrected in the latest U.S. service pack for SNA Server
version 2.11. For information on obtaining the service pack, query on the
following word in the Microsoft Knowledge Base (without the spaces):

  S E R V P A C K


Additional query words: prodsna 2.00 2.10 2.11

======================================================================
Keywords          :  
Technology        : kbAudDeveloper kbSNAServSearch kbSNAServ200 kbSNAServ211 kbSNAServ210
Version           : WINDOWS:2.0,2.1,2.11

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>