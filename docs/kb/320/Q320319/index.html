<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q320319: PRB: &quot;Um.dat May Be Corrupt&quot; Err Msg When You Start SourceSafe | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q320319: PRB: &quot;Um.dat May Be Corrupt&quot; Err Msg When You Start SourceSafe" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/320/Q320319/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/320/Q320319/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q320319: PRB: &quot;Um.dat May Be Corrupt&quot; Err Msg When You Start SourceSafe","url":"http://jeffpar.github.io/kbarchive/kb/320/Q320319/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q320319-prb-umdat-may-be-corrupt-err-msg-when-you-start-sourcesafe">Q320319: PRB: "Um.dat May Be Corrupt" Err Msg When You Start SourceSafe</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q320319
Product(s): Microsoft SourceSafe
Version(s): 5.0,6.0
Operating System(s): 
Keyword(s): 
Last Modified: 06-AUG-2002

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft Visual SourceSafe, 32-bit, for Windows versions 5.0, 6.0 
-------------------------------------------------------------------------------

SYMPTOMS
========

When you try to start Visual SourceSafe, you may receive the following error
message:

  Um.dat may be corrupt

CAUSE
=====

New Database
------------

When you create a new database, a 3.1 database format is converted to a 5.0
database format, which is then converted to a 6.0 database format. If the
conversion is not completed, the database may still be in 3.1 format. Check the
Version.dat file to see if the version number is 6.0. If the version number is
5.0, the database is still in 3.1 format.

Existing Database
-----------------

Alternatively, this problem can occur with an existing database. In this
scenario, the Um.dat file may be corrupted.

RESOLUTION
==========

New Database
------------

To resolve this problem, manually run the Ddconv.exe file against the database to
convert the database format. Alternatively, you can run the Ddupd.exe file if
you want to upgrade the database to 6.0 format.

For example, go to the VSS\Win32 folder in a command prompt window, and then type
one of the following commands:

- ddconv &lt;path to data directory&gt;
- ddupd &lt;path to data directory&gt;

Existing Database
-----------------

To resolve this problem, build a new Um.dat file. Note that when you build a new
Um.dat file, you must add all of the users again.

To build a new Um.dat file, follow these steps:

1. Create a temporary folder named C:\Sstemp.

2. Click Start, click Run, type "cmd" (without the quotation marks), and then
  click OK.

3. Go to the VSS\Win32 folder in the command prompt window, and then type the
  following command:

  "mkss c:\sstemp" (without the quotation marks)

4. In the VSS\Win32 folder at the command prompt, type the following command:

  "ddconv c:\sstemp" (without the quotation marks)

5. In the VSS\Win32 folder at the command prompt, type the following command:

  "ddupd c:\sstemp" (without the quotation marks)

6. Copy the Um.dat file from the C:\SStemp\Data folder to the Visual SourceSafe
  data directory.

7. Rename the Rights.dat file in the Visual SourceSafe data directory as
  Rights2.dat.

8. At a command prompt, run the analyze -f command against the database.

9. Add all of the Visual SourceSafe users again.

10. Reassign rights to the Visual SourceSafe users.

STATUS
======

This behavior is by design.

Additional query words:

======================================================================
Keywords          :  
Technology        : kbSSafeSearch kbAudDeveloper kbSSafe600 kbSSafe500 kbSSafe32bitSearch
Version           : :5.0,6.0
Issue type        : kbprb

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>