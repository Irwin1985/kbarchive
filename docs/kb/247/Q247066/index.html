<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q247066: Windows NT DHCP Server May Not Add BAD_ADDRESS Entries | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q247066: Windows NT DHCP Server May Not Add BAD_ADDRESS Entries" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/247/Q247066/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/247/Q247066/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q247066: Windows NT DHCP Server May Not Add BAD_ADDRESS Entries","url":"http://jeffpar.github.io/kbarchive/kb/247/Q247066/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q247066-windows-nt-dhcp-server-may-not-add-bad_address-entries">Q247066: Windows NT DHCP Server May Not Add BAD_ADDRESS Entries</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q247066
Product(s): Microsoft Windows NT
Version(s): winnt:4.0 SP4,4.0 SP5,4.0 SP6,4.0 SP6a
Operating System(s): 
Keyword(s): kbnetwork
Last Modified: 10-AUG-2001

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft Windows NT Server versions 4.0 SP4, 4.0 SP5, 4.0 SP6, 4.0 SP6a 
-------------------------------------------------------------------------------

SYMPTOMS
========

When a third-party Dynamic Host Configuration Protocol (DHCP) client detects
that the Transport Control Protocol/Internet Protocol (TCP/IP) address received
from a DHCP server already exists on the Local Area Network (LAN), the DHCP
client may send a DHCP decline message to the DHCP server. However, the DHCP
server may not add a BAD_ADDRESS entry in the DHCP database for this duplicate
TCP/IP address.

CAUSE
=====

This problem can occur when a Windows NT 4.0-based server with Service Pack 4
(SP4) or later receives a DHCP decline message that does not conform to Request
for Comment (RFC) 2131.


STATUS
======

Microsoft has confirmed this to be a problem in the Microsoft products that are
listed at the beginning of this article.
This problem is corrected in Microsoft Windows 2000.

MORE INFORMATION
================

Windows NT 4.0-based DHCP servers running SP4 or later do not add a BAD_ADDRESS
entry in the DHCP database when they receive a DHCP decline message from a DHCP
client that conforms to RFC 1541.

RFC 2131 specifies the "Requested IP address" field in the Option Field (0x32
hexadecimal, or 50 decimal) of the DHCP decline message, and RFC 1541 specifies
the "Requested IP address" field in the ciaddr field of the DHCP decline
message. A Windows NT 4.0-based DHCP server does not add BAD_ADDRESS to the DHCP
database for a duplicate TCP/IP address if the "Requested IP address" is not
present in the Option field of a DHCP decline message.

Third-party print servers that do not conform to RFC 2131 are mostly affected by
this issue. Windows NT-based DHCP clients are not affected. For more information
about DHCP server behavior when receiving DHCP decline messages, see RFC 2131,
section 4.3.3.

REFERENCES
==========

- For information about DHCP decline message format according to RFC 2131, see
  RFC 2131, section 4.4.1 (Table 5).

- For information about DHCP decline message format according to RFC 1541, see
  RFC 1541, section 4.4.1 (Table 4).

- For information about the relevant option field "Requested IP Address", see
  RFC 1533, section 9.1.

Additional query words: bootp

======================================================================
Keywords          : kbnetwork 
Technology        : kbWinNTsearch kbWinNT400search kbWinNTSsearch kbWinNTS400sp6 kbWinNTS400sp5 kbWinNTS400sp4 kbWinNTS400search
Version           : winnt:4.0 SP4,4.0 SP5,4.0 SP6,4.0 SP6a
Issue type        : kbprb

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>