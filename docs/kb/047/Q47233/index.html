<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q47233: QuickC Hangs When Running .COM if &quot;SET LINK=/CO&quot; | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q47233: QuickC Hangs When Running .COM if &quot;SET LINK=/CO&quot;" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/047/Q47233/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/047/Q47233/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q47233: QuickC Hangs When Running .COM if &quot;SET LINK=/CO&quot;","url":"http://jeffpar.github.io/kbarchive/kb/047/Q47233/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q47233-quickc-hangs-when-running-com-if-set-linkco">Q47233: QuickC Hangs When Running .COM if "SET LINK=/CO"</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q47233
Product(s): See article
Version(s): 2.01
Operating System(s): MS-DOS
Keyword(s): ENDUSER | buglist2.01 S_QuickC | mspl13_masm
Last Modified: 10-OCT-1989

The QuickC (QC) Version 2.01 environment hangs if you perform the
following steps:

1. Set the link environment variable at the DOS prompt with the /CO
   option (i.e., "d:\&gt; set link=/CO").

2. Enter the QuickAssembler (QA) environment with an assembly file in
   .COM format.

3. Assemble and link the source code.

4. Run the program in the environment; at this point you're now hung.

   Run this program at the DOS prompt, and the program executes
   properly without hanging.

To resolve this problem, you must remove the link environment variable,
delete the .COM file, and then reassemble/link the assembly source.

Microsoft has confirmed this to be a problem with Version 2.01 of
QuickC/QuickAssembler. We are researching this problem and will post
new information as it becomes available.

Note: It is not necessary to set the link environment variable
with the /CO CodeView option since this facility is offered within
the QuickC shell. This can be set by selecting the following:

   OPTIONS.Make.Linker Flags.CodeView Information

The following source code demonstrates this problem:

;Program: HANG.COM
;Purpose: Demonstrates hanging problem in QuickC 2.01.
.MODEL  TINY
.DATA

msg     DB      "Hello, world.", 13, 10, "$"

.CODE
                org 100h
entry:                                       ; Program entry point
HELLO proc near
                nop
                mov     ah, 9h               ; Request DOS Function 9
                mov     dx, OFFSET msg       ; Load DX with offset of string

                int     21h                  ; Display String

                mov     ax, 4C00h
                int     21h

HELLO endp
END entry

The hang occurs before the first instruction is executed. QC switches
to the output screen, displays the "HANG.COM" title, and hangs.

The .COM file is polluted when you assemble with the link=/CO
environment variable set from DOS. This can be demonstrated by the
fact that if you hang your machine as noted above, reboot (without
link=/CO env var), and then run HANG.COM from within QA (without
reassembling), you again successfully hang your computer.
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>