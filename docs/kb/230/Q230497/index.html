<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q230497: XCON: MTA Sends NDR: Message Transfer Service Congestion | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q230497: XCON: MTA Sends NDR: Message Transfer Service Congestion" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/230/Q230497/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/230/Q230497/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q230497: XCON: MTA Sends NDR: Message Transfer Service Congestion","url":"http://jeffpar.github.io/kbarchive/kb/230/Q230497/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q230497-xcon-mta-sends-ndr-message-transfer-service-congestion">Q230497: XCON: MTA Sends NDR: Message Transfer Service Congestion</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q230497
Product(s): Microsoft Exchange
Version(s): winnt:5.5
Operating System(s): 
Keyword(s): exc55
Last Modified: 29-JUL-1999

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft Exchange Server, version 5.5 
-------------------------------------------------------------------------------

SYMPTOMS
========

This article applies to Exchange Server organizations using X.400 Connectors to
interconnect Exchange Server sites.

Users are reporting receiving non-delivery reports (NDRs) when they send messages
to certain Exchange Server sites. The NDR appears as follows:

  Your message did not reach some or all of the intended recipients.

  Subject: test 10:00
  Sent: 4/29/99 10:02 AM

  The following recipient(s) could not be reached:

  Doe, John on 4/29/99 10:17 AM
  The recipient could not be processed due to congestion in the message transfer
  service. The MTS-ID of the original message is:
  c=US;a=;p=DTF;l=NTMX17OA-990429140155Z-96516
  MSEXCH:MSExchangeMTA:HSD:NTMX21BE

The local Exchange Server bridgehead server may show the following events in the
application event log in regards to the non-delivery of messages:

  Event ID :290
  A non-delivery report (reason code transfer-failure and diagnostic code
  MTS-congestion) is being generated for message C=US;A=
  ;P=UTC;L=HSMX30NT-990429133235Z-1108. It was originally destined for
  DN:/o=UTC/ou=HSD/cn=Configuration/cn=Servers/cn=HSMX21NT/cn=Microsoft DSA
  (recipient number 1), and was to be redirected to
  DN:/o=UTC/ou=HSD/cn=CONFIGURATION/cn=SERVERS/cn=HSMX21NT/cn=MICROSOFT DSA
  C=US;A= ;P=UTC;O=HSD;S=HSMX21NT-DSA;. [MTA DISP:RESULT 22 136] (12)

CAUSE
=====

The message transfer service congestion NDR is sent when the user's local
bridgehead server has had consistent difficulty reaching a remote message
transfer agent (MTA) over an extended period of time. This can be caused by the
known issue mentioned in the following Microsoft Knowledge Base articles:

  Q193894 XCON: MTA Stops Processing Messages and Generates 9156 Events

  Q229643 XCON: 9156 Errors Occur after Applying Exchange 5.5 Service Pack 2

In brief, the Exchange Server MTA may run out of TCP/IP control blocks and then
can no longer initiate or accept X.400 communications from other MTAs.

RESOLUTION
==========

To verify whether an Exchange Server X.400 bridgehead server is out of TCP/IP
control blocks, examine the application log for the following event:

  Source: MSExchangeMTA
  Category: Resource
  Type: Warning:
  A resource limit has been reached while attempting to open an association.
  There are no free control blocks available for network type 1. The configured
  count is 20. [BASE IL TCP/IP DRVR 8 282] (10)

After the above event is logged in the application, the MTA cannot send or
receive messages to other MTAs. Unless there is another valid route for the
messages to be delivered to the remote Exchange Server site, the MTA is forced
to send NDRs for those messages after a period of time.

To immediately establish mail flow, the MTA logging the events needs to be
re-started. However, the long-term resolution is listed in Microsoft Knowledge
Base article Q229643.

MORE INFORMATION
================

Some Exchange Server organizations use only one route between Exchange Server
sites. In cases where that route is an X.400 Connector and the X.400 bridgehead
server MTAs are logging the 9156 events, the Exchange Server Directory service
cannot update the remote site's directory. The Directory service may log the
following events as evidence of the mail flow problems:

  Event ID: 1103
  Source: MSExchangeDS
  Category: Replication
  Type: Warning
  During intersite replication, the directory replication agent (DRA) received a
  non-delivery report (NDR) for messages submitted for the directory at
  Microsoft DSA. The diagnostic is 2. The reason is 0.

After mail flow is reestablished over the X.400 Connectors connecting the two
sites, the Exchange Server Directory service can send and receive directory
updates and no longer logs the above event.

Additional query words: mts

======================================================================
Keywords          : exc55 
Technology        : kbExchangeSearch kbExchange550 kbZNotKeyword2
Version           : winnt:5.5
Issue type        : kbprb

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>