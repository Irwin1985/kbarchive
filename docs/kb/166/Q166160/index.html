<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q166160: Stop C000021a after Applying Windows NT 4.0 Service Pack | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q166160: Stop C000021a after Applying Windows NT 4.0 Service Pack" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/166/Q166160/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/166/Q166160/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q166160: Stop C000021a after Applying Windows NT 4.0 Service Pack","url":"http://jeffpar.github.io/kbarchive/kb/166/Q166160/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q166160-stop-c000021a-after-applying-windows-nt-40-service-pack">Q166160: Stop C000021a after Applying Windows NT 4.0 Service Pack</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q166160
Product(s): Microsoft Windows NT
Version(s): 4.0
Operating System(s): 
Keyword(s): kbsetup
Last Modified: 13-AUG-2002

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft Windows NT Workstation version 4.0 
- Microsoft Windows NT Server version 4.0 
-------------------------------------------------------------------------------

SYMPTOMS
========

After you apply a service pack for Windows NT 4.0, the computer may stop with
the following error message on the subsequent restart:

  Stop: c000021a {Fatal System Error}
  The session manager initialization system process terminated
  unexpectedly with a status of 0xc0000005 (0x00000000, 0x0000000)

NOTE: The parameters in parenthesis are specific to your system configuration and
may differ each time.

-or-

After you install a Windows NT 4.0 service pack, the system restarts at the blue
kernel screen without an error message and continues in a restart loop.

CAUSE
=====

This can be caused by a corrupt Windows NT system file, or where one or more
Windows NT system files, which are in use, may not be copied properly while
applying a service pack.

On Compaq servers that are running Compaq's Insight Manager, the service pack
update program would display a message that the file Ntdll.dll was busy. If you
skipped the copy of this file and continued the installation, the system will
exhibit one of the above symptoms on start up.

RESOLUTION
==========

You resolve this problem by performing one of the following:

- If the system files are on a FAT partition, boot to an MS-DOS bootable floppy
  disk and replace Ntdll.dll with the updated version from Windows NT 4.0
  Service Pack 2.

- Replace Ntdll.dll with the updated version from Service Pack 2 by modifying
  the Setup.log file on the Emergency Repair Disk (ERD). For more information,
  please see the following article in the Microsoft Knowledge Base:

  ARTICLE-ID: Q164471
  TITLE : Replacing System Files Using a Modified Emergency Repair Disk

- Copy the Setupdd.sys file from Service Pack 2 to the second Windows NT Setup
  disk, run an Emergency Repair, select the option to "Verify Windows NT System
  files", and then choose to replace the Ntdll.dll file.

- If the system files are on an NTFS partition, install a parallel copy of
  Windows NT and replace Ntdll.dll in the original folder with the updated
  version from Service Pack 2.


MORE INFORMATION
================

NOTE: There are other causes for Stop: 0xC000021a as listed below:

For more information, please refer to the following Microsoft Knowledge Base
articles:

  


  ARTICLE-ID: Q160658
  TITLE : Stop C000021A Using MoveFileEx MOVEFILE_DELAY_UNTIL_REBOOT

  ARTICLE-ID: Q139843
  TITLE : Recovering from STOP 21a Caused by Disk Mirror Sets

Additional query words: Stop 0xc000021a ntdll.dll

======================================================================
Keywords          : kbsetup 
Technology        : kbWinNTsearch kbWinNTWsearch kbWinNTW400 kbWinNTW400search kbWinNT400search kbWinNTSsearch kbWinNTS400search kbWinNTS400
Version           : :4.0
Issue type        : kbprb

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>