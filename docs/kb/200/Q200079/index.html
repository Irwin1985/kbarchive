<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q200079: XADM: Event ID 2247 Directory Name Object Allocation Failed | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q200079: XADM: Event ID 2247 Directory Name Object Allocation Failed" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/200/Q200079/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/200/Q200079/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q200079: XADM: Event ID 2247 Directory Name Object Allocation Failed","url":"http://jeffpar.github.io/kbarchive/kb/200/Q200079/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q200079-xadm-event-id-2247-directory-name-object-allocation-failed">Q200079: XADM: Event ID 2247 Directory Name Object Allocation Failed</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q200079
Product(s): Microsoft Exchange
Version(s): winnt:4.0
Operating System(s): 
Keyword(s): exc4
Last Modified: 19-AUG-1999

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft Exchange Server, version 4.0 
-------------------------------------------------------------------------------


SYMPTOMS
========

If data compression is turned on for directory synchronization (dirsync)
messages, you may get the following application log error messages. In addition,
you may see the Exchange Server available CPU cycles drop to near 0.

  Event ID 2247
  Source: MTA OpSys
  Category: Warning
  Description: "A directory name object allocation command failed' "RD Server
  MAIN BASE[1114] 12"

You may also receive:

  Event ID: 2380
  Source: MSExchangeMSMI
  Category: Session error
  Description: A memory access violation has occurred that prevents further
  processing of a message. The access violation that occurred is an attempt to
  read from 0x4. Please refer to the immediate following events for more
  information.

  Event ID: 2447
  Source: MSExchangeMSMI
  Category: Session error
  Description: MSMI has failed processing $System message is left in the
  delivery queue.

STATUS
======

Microsoft has confirmed this to be a problem in Exchange Server version 4.0.
This problem has been corrected in the latest U.S. service pack for Exchange
Server version 4.0. For information on obtaining the service pack, query on the
following word in the Microsoft Knowledge Base (without the spaces):

  S E R V P A C K

MORE INFORMATION
================

If compression is turned on, then the attachments in the dirsync messages
generated by the directory exchange agent (DXA) are in a compressed format and
unreadable when viewed with an editor, similar to:

[ASCII 176][ASCII 229]([ASCII 140][ASCII 220][ASCII 194][ASCII 206]-[ASCII 194]   @[ASCII 208]?-0&amp;[ASCII 238][ASCII 158]FY
($[ASCII 220][ASCII 177]mu"z"iQ[ASCII 167]/[ASCII 142][ASCII 173]][ASCII 143]#[ASCII 194]@kEdP[ASCII 178]m[ASCII 211][ASCII 186][ASCII 233][ASCII 244][ASCII 173][ASCII 221][ASCII 178]l[ASCII 217]&amp;[ASCII 168]'[ASCII 190][ASCII 216][ASCII 136]'[ASCII 173][ASCII 203][ASCII 182],H[ASCII 168]l[ASCII 235][ASCII 206]'?6[ASCII 188]

An uncompressed message with some formatting applied looks similar to:

[ASCII 162][ASCII 175]
R pcm:MYNET/MYPO-#@[ASCII 208]?-0&amp;[ASCII 238][ASCII 158]FY
A Admin  pcm:MYNET/MYPO/Admin0&amp;[ASCII 238][ASCII 158]FY
A Admin Schedule Plus   pcm:MYNET/MYPO/adminsch"z"iQ

A possible workaround is to turn DXA compression off:

WARNING: Using the raw mode of the Exchange Server Administrator program (admin
/r) incorrectly can cause serious problems that may require you to reinstall
Microsoft Windows NT Server and/or Microsoft Exchange Server. Microsoft cannot
guarantee that problems resulting from the incorrect use of raw mode can be
solved. Use raw mode at your own risk.

1. Start the Microsoft Exchange Server Administrator program in raw mode by
  typing the following at a command prompt:

  "c:\exchsrvr\bin\admin /r" (without the quotation marks)

2. Select each Dirsync Requestor object individually.

3. On the File menu, click Raw Properties to view the raw properties of the
  Requestor object.

4. Look for the DXA-FLAG object, view the number, and subtract 32 from it. For
  example. You might see a value of 39604. Change it to 39572 to turn
  compression off the $system messages.

For additional information, please see the following article in the Microsoft
Knowledge Base:

  Q140946 XADM: Microsoft Mail Interchange Hang During DirSync

Additional query words:

======================================================================
Keywords          : exc4 
Technology        : kbExchangeSearch kbExchange400 kbZNotKeyword2
Version           : winnt:4.0
Issue type        : kbbug
Solution Type     : kbfix

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>