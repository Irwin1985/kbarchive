<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q229961: XFOR:Applying Restrictive Address Space on Internet Mail Service | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q229961: XFOR:Applying Restrictive Address Space on Internet Mail Service" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/229/Q229961/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/229/Q229961/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q229961: XFOR:Applying Restrictive Address Space on Internet Mail Service","url":"http://jeffpar.github.io/kbarchive/kb/229/Q229961/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q229961-xforapplying-restrictive-address-space-on-internet-mail-service">Q229961: XFOR:Applying Restrictive Address Space on Internet Mail Service</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q229961
Product(s): Microsoft Exchange
Version(s): winnt:4.0,5.0,5.5
Operating System(s): 
Keyword(s): kbenv
Last Modified: 06-AUG-2002

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft Exchange Server, versions 4.0, 5.0, 5.5 
-------------------------------------------------------------------------------

SUMMARY
=======

Using incorrect address spaces in the Internet Mail Service (Internet Mail
Connector in Exchange Server 4.0) other than the default wildcard (*) entry can
cause unexpected routing to occur with multiple Internet Mail Services
configured. Non-delivery of outbound mail is also possible.

This article explains how to configure the Internet Mail Service properly, and
why.

MORE INFORMATION
================

Message routing is performed by the Message Transfer Agent (MTA). The address
space which best matches the recipient address is selected, based on the
following preferences:

1. An exact string match: (for example, recipient = "SMTP:userz@microsoft.com"
  and address space = SMTP:userz@microsoft.com")

2. A wildcard string match: (for example, recipient = "SMTP:userz@microsoft.com"
  and address space = "SMTP:*@microsoft.com").

  The wildcard string that matches more non-wild characters is given preference.

3. A partial string match: (for example, recipient = "SMTP:userz@microsoft.com"
  and address space = "SMTP:userz@com").

4. The address type matches and the address string is blank: (for example,
  recipient = "userz@microsoft.com" and address space = "SMTP:")

The MTA will evaluate the address and decide where to route it, and will do this
by comparing the entire address of the recipient to the address space entered in
the Internet Mail Service.

As the MTA does not work like a Domain Name System (DNS) resolver, it does not
strip off the local portion of the address before matching it against the
address space string. The whole user address is compared against the whole
address space string.

A routing table entry of "SMTP:&lt;company&gt;.com" or
"SMTP:@&lt;company&gt;.com" will not match a user of address
"SMTP:&lt;user&gt;@&lt;company&gt;.com," whereas an entry of
"SMTP:*@&lt;company&gt;.com" will match. The MTA will then choose a single
connector from the set of connectors that support that address space.

As long as the Gateway Address Routing Table (GWART) doesn't change, the same
address space will always be chosen during rerouting. Rerouting tries different
connectors within the set of connectors supporting this address space.

Additional query words:

======================================================================
Keywords          : kbenv 
Technology        : kbExchangeSearch kbExchange500 kbExchange550 kbExchange400 kbZNotKeyword2
Version           : winnt:4.0,5.0,5.5
Issue type        : kbinfo

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>