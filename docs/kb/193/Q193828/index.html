<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q193828: IMS Programs May Lock after COMTI Posts a Backout Operation | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q193828: IMS Programs May Lock after COMTI Posts a Backout Operation" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/193/Q193828/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/193/Q193828/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q193828: IMS Programs May Lock after COMTI Posts a Backout Operation","url":"http://jeffpar.github.io/kbarchive/kb/193/Q193828/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q193828-ims-programs-may-lock-after-comti-posts-a-backout-operation">Q193828: IMS Programs May Lock after COMTI Posts a Backout Operation</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q193828
Product(s): Microsoft SNA Server
Version(s): WINDOWS:1.0 SP2
Operating System(s): 
Keyword(s): 
Last Modified: 04-APR-2000

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft COM Transaction Integrator for CICS and IMS, version 1.0 SP2 
-------------------------------------------------------------------------------

SUMMARY
=======

In testing COMTI components that require transactions interoperating with IMS
version 6.0, Microsoft has observed unexpected behavior when the transaction
does not come to a successful conclusion on all systems. When MSDTC determines
that the transaction cannot be committed, it causes COMTI to send a back-out
indication to IMS. In order to back out the application, IMS issues an ABEND,
code 0711, in the MPR (Message Processing Region). This returns the
application's data to its original state, but causes undesirable consequences.
The IMS transaction and program are left in a stopped state and must be manually
started by the master terminal operator before COMTI can resume operations with
them. The SNA conversation is abnormally terminated, which causes a number of
events to be posted to the Windows NT application event log, indicating problems
with the COMTI SNA transport.

MORE INFORMATION
================

(203) The COM Transaction Integrator state machine's call to the transport's
Abort method failed.

  HRESULT: 0x80020009

Explanation: The COM Transaction Integrator state machine's call to the Abort
method on the transport object failed unexpectedly. This is probably caused by a
problem with the LU6.2 transport. Normal transaction aborts do not generate this
event.

Action: Look for related event log entries from the COM Transaction Integrator
transport object or SNA Server to may provide additional information.

Also, MSDTC does not know the disposition of the transaction after the
conversation ABENDs, so it initiates a recovery sequence to make sure it is
backed out, leaving this event in the log:

  (122) The Resynchronization Service performed successful transaction
  recovery.

Explanation: Local LU xxxxxxxx and host LU yyyyyyyy agreed on the final state of
the transaction. Local transaction state was RESET. Host transaction state was
1, where:

  1 = RESET
  3 = IN_DOUBT
  4 = COMMITTED
  5 = HEURISTIC_RESET
  6 = HEURISTIC_COMMITTED
  7 = HEURISTIC_MIXED

Logical Unit of Work ID = SGPHL1.L1163000 07CE091E0E150001

Action: No Action is necessary.

If the host reported a heuristic decision for the transaction due to host
configuration or operator action, the outcome selected for the transaction was
correct.

If the client program subsequently attempts a new method before the IMS
transaction has been started again, it will receive the following exception,
which is also recorded in the event log:

(102) COM Transaction Integrator reported the following exception to the client:

  Component: IMS2PH.TRANSACTIONS.1
  Method: TRANUPDT

  Exception description:
  (1429) Transaction TRANUPDT at host LU IMSMLU62 could not load the server
  program.

See the Windows NT Event Log on the COMTI computer for SNA error log data,
including possible host ABEND code. Review the host region configuration.

Explanation: An Automation exception representing an error condition was returned
to a COM Transaction Integrator client. The description shown above contains
more information about the exception that was reported.

Action: The exception may be caused by communication problems or errors in your
Host application. See the exception description for corrective actions.

IBM has stated that this behavior by IMS is as intended. However, Microsoft does
not believe that this is a correct implementation of the protocols specified in
IBM's Systems Network Architecture: Sync Point Services Reference (SC31-8134-00,
p2-67). This reference states that the system that receives the Backout (FMH-7)
should reply positively and leave the conversation intact. We are continuing to
work with IBM to seek a resolution on this issue.

NOTE: The data integrity is not jeopardized by the inconvenient behavior
described above. The back-out operations are successfully issued in each
environment.

Additional query words: 2PC, IMS, COMTI, BACKOUT, TWO PHASE COMMIT, Sync Level 2

======================================================================
Keywords          :  
Technology        : kbAudDeveloper kbCOMTISearch
Version           : WINDOWS:1.0 SP2
Issue type        : kbinfo

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>