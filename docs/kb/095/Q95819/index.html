<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q95819: MS-DOS DEFRAG Err Msg: &quot;Insufficient Memory…&quot; | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q95819: MS-DOS DEFRAG Err Msg: &quot;Insufficient Memory…&quot;" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/095/Q95819/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/095/Q95819/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q95819: MS-DOS DEFRAG Err Msg: &quot;Insufficient Memory…&quot;","url":"http://jeffpar.github.io/kbarchive/kb/095/Q95819/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q95819-ms-dos-defrag-err-msg-insufficient-memory">Q95819: MS-DOS DEFRAG Err Msg: "Insufficient Memory…"</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q95819
Product(s): Microsoft Disk Operating System
Version(s): MS-DOS:6.0,6.2,6.22
Operating System(s): 
Keyword(s): 
Last Modified: 19-NOV-1999

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft MS-DOS operating system versions 6.0, 6.2, 6.22 
-------------------------------------------------------------------------------

SUMMARY
=======


This information applies to both Microsoft DoubleSpace and Microsoft DriveSpace.
For MS-DOS 6.22, use DRVSPACE in place of DBLSPACE for commands and filenames.

SYMPTOMS
========

If there are too many files and directories on your hard drive, MS-DOS
Defragmenter (Defrag) can run out of memory. If Defrag runs out of memory before
beginning optimization, the following error messages are displayed:

  Insufficient memory - Error Reading the FAT

  -and-

  Insufficient Memory: Error Reading Directory

CAUSE
=====

Defragmenter is limited by the number of files/directories and NOT the disk
size. It is unlikely that this problem will occur unless you have more than
10,000 files/directories on your drive; however, it has occurred with as few as
8,000 files/directories.


WORKAROUND
==========

You may be able to alleviate the problem by increasing the amount of free
conventional memory and available upper memory blocks (UMBs). Refer to the
"Microsoft MS-DOS User's Guide" for version 6.0 for additional information about
freeing conventional memory.

If you get out-of-memory errors with MS-DOS 6.2 Defrag, increase conventional
memory and/or XMS memory (up to 384K). MS-DOS 6.2 Defrag uses up to 384
kilobytes (K) of extended (XMS) memory, when available, to hold the FAT data for
the drive.

If you have freed as much conventional memory as possible and you are using a 386
or 486 machine, try the following temporary workaround:

1. Make sure EMM386.EXE is being loaded in the CONFIG.SYS file.

2. Using an ASCII text editor such as MS-DOS Editor, add the I=A000-B7FF and
  NOEMS parameters to the device=C:\DOS\EMM386.EXE line in the CONFIG.SYS
  file.

  Note: The A000-B7FF range is commonly used by video cards. Unless you have a
  monochrome video card, do not run any graphics applications when you are
  using the I=A000-B7FF parameter.

3. Save the CONFIG.SYS file and quit the text editor.

4. Restart your computer.

5. Run Defragmenter with the /G0 switch to prevent it from running in graphics
  mode. For example, you would type:

  " defrag /g0 " (without the quotation marks)

  NOTE: The switch is G and the number zero, not G and the letter O.

6. Edit your CONFIG.SYS file and remove the parameters you added in step 2.

7. Save the text file, exit the editor and restart your computer.

If, after following the above procedure, you continue to run out of memory when
you attempt to defragment your drive, you probably have more files than
Defragmenter can handle. To optimize your disk, you need to remove some files
from your disk. If this problem occurs frequently, you may want to consider
creating smaller partitions or multiple DoubleSpace drives on the same
partition.

NOTE: If you are running Delete Sentry, you may want to run UNDELETE /PURGE to
remove deleted files from the SENTRY directory.

Additional query words: 6.00 6.20 dos msdos defrag max maximum dblspace raise the ceiling

======================================================================
Keywords          :  
Technology        : kbMSDOSSearch kbMSDOS622 kbMSDOS620 kbMSDOS600
Version           : MS-DOS:6.0,6.2,6.22

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>