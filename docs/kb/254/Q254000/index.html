<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q254000: SNA Server Access Violation Occurs after Dynamically Adding 3270 | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q254000: SNA Server Access Violation Occurs after Dynamically Adding 3270" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/254/Q254000/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/254/Q254000/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q254000: SNA Server Access Violation Occurs after Dynamically Adding 3270","url":"http://jeffpar.github.io/kbarchive/kb/254/Q254000/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q254000-sna-server-access-violation-occurs-after-dynamically-adding-3270">Q254000: SNA Server Access Violation Occurs after Dynamically Adding 3270</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q254000
Product(s): Microsoft SNA Server
Version(s): WINDOWS:4.0,4.0 SP1,4.0 SP2,4.0 SP3
Operating System(s): 
Keyword(s): kbSNA400sp4fix kbSNA400PreSP4fix
Last Modified: 13-JUN-2001

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft SNA Server, versions 4.0, 4.0 SP1, 4.0 SP2, 4.0 SP3 
-------------------------------------------------------------------------------

SYMPTOMS
========

The SNA Server service (Snaservr.exe) may fail with an Access Violation error in
routine s1pnsfol() after dynamically adding 3270 LUs to the configuration. When
this occurs, the SNA Server process stops abnormally and logs the following
event in the Windows NT application event log:

  Event ID: 624
  Source: SNA Server

If Drwtsn32.exe is configured as the default Windows NT debugger, the following
Drwtsn32.log entry is also created:

  

  Application exception occurred:

       App: exe\snaservr.dbg (pid)

       When: date time 

       Exception number: c0000005 (access violation)

  [....]

  State Dump for Thread Id 

  eax=00000000 ebx=00000004 ecx=01190000 edx=00000000 esi=00000000 

  edi=013319bc eip=0104e0ad esp=00bcfe6c ebp=0000000a iopl=0 
     
  nv up ei pl zr na po nc

  cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000 fl=00000246

  function: s1pnsfol

       0104e08a 8b0db0591801     mov     ecx,[sct (011859b0)]  
       0104e090 8bc6             mov     eax,esi
       0104e092 25ffff0000       and     eax,0xffff
       0104e097 57               push    edi
       0104e098 6a0d             push    0xd
       0104e09a 56               push    esi
       0104e09b 8d0440           lea     ax,[eax+eax*2]  
                                             ds:00000000=????????
       0104e09e c744242000000000 mov   dword ptr [esp+0x20],0x0  
                                             ss:025ce873=????????
       0104e0a6 c1e003           shl     eax,0x3
       0104e0a9 89442428         mov     [esp+0x28],eax  
                                             ss:025ce873=????????
  FAULT -&gt;0104e0ad 8b5401ec         mov     edx,[ecx+eax-0x14]  
                                             ds:019fea07=????????
       0104e0b1 89542434         mov     [esp+0x34],edx  
                                             ss:025ce873=????????

  *---- Stack Back Trace ----*

  FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
  00bcfec8 010522c0 01d30d5c 00000000 00000000 00251bd0 snaservr!s1pnsfol

CAUSE
=====

The SNA Server service encounters a problem creating an internal configuration
record for the dynamically defined 3270 LU.

RESOLUTION
==========

To resolve this problem, obtain the latest service pack for SNA Server 4.0. For
additional information, please see the following article in the Microsoft
Knowledge Base:

  Q215838 How to Obtain the Latest SNA Server Version 4.0 Service Pack



STATUS
======

Microsoft has confirmed this to be a problem in Microsoft SNA Server 4.0, 4.0
SP1, 4.0 SP2 and 4.0 SP3.

This problem was first corrected in SNA Server 4.0 Service Pack 4.


Additional query words:

======================================================================
Keywords          : kbSNA400sp4fix kbSNA400PreSP4fix 
Technology        : kbAudDeveloper kbSNAServSearch kbSNAServ400 kbSNAServ400SP1 kbSNAServ400SP2 kbSNAServ400SP3
Version           : WINDOWS:4.0,4.0 SP1,4.0 SP2,4.0 SP3
Issue type        : kbbug
Solution Type     : kbfix

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>