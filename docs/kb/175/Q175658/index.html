<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q175658: Gathering Information for Troubleshooting Performance Issues | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q175658: Gathering Information for Troubleshooting Performance Issues" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/175/Q175658/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/175/Q175658/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q175658: Gathering Information for Troubleshooting Performance Issues","url":"http://jeffpar.github.io/kbarchive/kb/175/Q175658/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q175658-gathering-information-for-troubleshooting-performance-issues">Q175658: Gathering Information for Troubleshooting Performance Issues</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q175658
Product(s): Microsoft Windows NT
Version(s): 3.5,3.51,4.0
Operating System(s): 
Keyword(s): kbtool
Last Modified: 11-JUN-2002

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft Windows NT Workstation versions 3.5, 3.51, 4.0 
- Microsoft Windows NT Server versions 3.5, 3.51, 4.0 
-------------------------------------------------------------------------------

IMPORTANT: This article contains information about modifying the registry. Before you modify the registry, make sure to back it up and make sure that you understand how to restore the registry if a problem occurs. For information about how to back up, restore, and edit the registry, click the following article number to view the article in the Microsoft Knowledge Base:

  Q256986 Description of the Microsoft Windows Registry


SUMMARY
=======

This article explains how to gather information so that Microsoft Support
Professionals can troubleshoot performance problems on a computer running
Windows NT. Please read all steps as you will be asked to provide information
from several tools when contacting a support professional for assistance.

MORE INFORMATION
================

The basic tool used for troubleshooting performance issues is Performance
Monitor. Follow the steps below to prepare for collecting performance
information:

Prior to Creating a Performance Monitor Log
-------------------------------------------

1. Turn off screen savers permanently.

  a. Click Start, point to Settings, click Control Panel, and then double-click
     Display.

  b. Click the Screen Saver tab, click None, and then click OK.

2. Disable all non-essential services in the Services tool in Control Panel.

3. For all possible disk issues, enable Diskperf.

  a. Click Start, point to Programs, and then click MS-DOS Command Prompt.

  b. Type the command "diskperf -y" (without the quotation marks) to enable
     disk counters.

     NOTE: Do not use diskperf -YE unless instructed to do so.

4. Document Lanman Server parameters.

WARNING: If you use Registry Editor incorrectly, you may cause serious problems
that may require you to reinstall your operating system. Microsoft cannot
guarantee that you can solve problems that result from using Registry Editor
incorrectly. Use Registry Editor at your own risk.

  a. Run Registry Editor (Regedt32.exe).

  b. Go to the following keys in the registry:

     HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SessionManager
     \Memory Management
     &lt;BR/&gt;&lt;BR/&gt;
     HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanServer
     \Parameters

     NOTE: The above registry keys are one path; they have been wrapped for
     readability.

  c. Write down all values on the right-hand side that are not equal to zero.

  -or-

     On the Registry menu, click "Save Subtree As" and then change the file type
     to Text File and give the file a name.

     NOTE: Do not save the file as a *.REG file.

5. If instructed to do so by the support professional, install the SNMP service
  and Network Monitor Agent and Tools. This procedure will require the Windows
  NT compact disc or an appropriate share path.

  To install on Windows NT 3.51

  a. In the Main group, double-click Control Panel, and then double-click
     Network.

  b. Click Add Software, select SNMP, and then click OK.

  c. Repeat the previous step and select Network Monitor Agent and Tools. Click
     OK when you receive a prompt to restart the computer.

  To install on Windows NT 4.0

  a. Click Start, point to Settings, click Control Panel, and then double-click
     Network.

  b. Click the Services tab.

  c. Click Add.

  d. From the list of Network Software, select SNMP and then click OK.

  e. Repeat the previous step and select "Network Monitor Agent and Tools".

  f. Click No when prompted to restart the computer.

  g. If there are any service packs installed, reapply the service pack.

  h. Click OK when prompted to restart the computer. NOTE: These services
     install Network Interface, Network Segment, and TCP/IP counters in
     Performance Monitor.

Creating the Performance Monitor Log
------------------------------------

Run Performance Monitor from the following location:

- Click Start, point to Program, and then click Administrative Tools.

For specific details on creating the Performance Monitor log, please see the
following article in the Microsoft Knowledge Base:

  Q150934 How to Create a Performance Monitor Log for NT Troubleshooting

In cases where the User Interface (UI) of the server in question is hanging or
not responding, run Performance Monitor from another computer running Windows NT
Server or Workstation.

The counters recommended in the article above will change depending on the
problem that you are troubleshooting. See the "Recommended Performance Objects"
section below or consult the Microsoft Support Engineer for suggested objects to
monitor.

Recommended Performance Objects
-------------------------------

If you are troubleshooting a performance issue or an issue that looks like a
memory leak, the objects that Performance Monitor should log include, but are
not limited to, the following:

For memory leaks:

  Cache
  Memory
  Objects
  Paging file
  Process
  Processor
  System
  Terminal Services (if a Terminal Server)

For all other resource issues, add additional counters:

  Logical disk
  NBT Connections
  Network interface
  Physical disk
  Redirector
  Server
  Server work queues
  Thread (do NOT capture if a terminal server)
  All Terminal Server counters (if a Terminal Server)
  All Protocol counters bound to network adapters

In addition, the smaller the update interval, the larger the log file, so check
to make certain there is sufficient disk space available on the computer running
Performance Monitor.

Allow Performance Monitor to run a minimum of three days unless you have been
instructed otherwise.

Do not log off of the computer where you are running Performance Monitor as this
will close out Performance Monitor. Minimize Performance Monitor if preferred
and if needed lock the screen on this computer.

After Creating the Performance Monitor Log
------------------------------------------

1. Create a Windows NT Diagnostics Report.

  a. Click Start, point to Programs, click Administrative Tools, and then
     double-click Windows NT Diagnostics.

  b. On the File menu, click Save Report.

  c. Click All Tab in the Scope Set, click Complete in the Detail Level, click
     File for Destination, and then click OK.

2. Save the System and Application Event Logs.

  a. Click Start, point to Programs, click Administrative Tools, and then
     double-click Event Viewer.

  b. On the Log menu, click System. If System is already selected, click Save
     As. Save the file as System.evt.

  c. On the Log menu, click Application.

  d. On the Log menu, click Save As. Save the file as Application.evt.

3. Zip the following files into one file using a compression tool.

   - Registry file or the written information in a text file.

   - Performance Monitor log (the .log file, not the *.pml file).

   - Windows NT diagnostics report.

   - Event logs: System.evt and Application.evt.

Contact the Microsoft Support Professional working with you for additional
information on sending the zipped file to the engineer.


Additional query words: performance tuning memory leak utilization Perfmon setup

======================================================================
Keywords          : kbtool 
Technology        : kbWinNTsearch kbWinNTWsearch kbWinNTW400 kbWinNTW400search kbWinNT351search kbWinNT350search kbWinNT400search kbWinNTW350 kbWinNTW350search kbWinNTW351search kbWinNTW351 kbWinNTSsearch kbWinNTS400search kbWinNTS400 kbWinNTS351 kbWinNTS350 kbWinNTS351search kbWinNTS350search
Version           : :3.5,3.51,4.0
Hardware          : ALPHA PPC x86
Issue type        : kbhowto

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>