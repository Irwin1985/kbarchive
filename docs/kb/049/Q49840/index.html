<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q49840: Use of the /Gt Switch in C | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q49840: Use of the /Gt Switch in C" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/049/Q49840/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/049/Q49840/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q49840: Use of the /Gt Switch in C","url":"http://jeffpar.github.io/kbarchive/kb/049/Q49840/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q49840-use-of-the-gt-switch-in-c">Q49840: Use of the /Gt Switch in C</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q49840
Product(s): See article
Version(s): 5.10   | 5.10
Operating System(s): MS-DOS | OS/2
Keyword(s): ENDUSER | | mspl13_c
Last Modified: 7-DEC-1989

Question:

I am using large memory model and the /Gt switch when programming and
I still get the message "stack plus data larger than 64K." Could you
give me some pointers about where data goes when using large model? Do
heap and stack still remain in DGROUP when I use /Gt?

Response:

What goes out of the default data segment depends on how you use /Gt.
/Gt alone is the same as /Gt256, which means that ONLY data items of
size 256 and greater get moved out. If you have a lot of data items
smaller than that, that data will NOT get moved out. With /Gt256, it
is still possible that the data left in DGROUP plus the stack could
exceed 64K.

As the value on the /Gt switch becomes smaller, more and more data
gets pushed out. /Gt0 pushes all of the data generated by your program
out. However, it also generates some constants in the logical segment
_CONST in DGROUP, 2 bytes for each extern or uninitialized variable
moved. The following classes of variables will generate a 2-byte
segment address in DGROUP for EACH variable of that class declared
when /Gt0 is used:

1. All extern declarations, such as "extern int i;"

2. All declarations without storage class that are not initialized,
   such as "int i;"

Initialized variables such as "int i = 0;", provided that the sum of
their sizes is less then 64K, are treated as a group and generate only
one segment address in DGROUP per module. Therefore, the optimal
number for minimizing DGROUP space is /Gt3. /Gt3 is better than /Gt0
for uninitialized and extern variables because /Gt0 will move out 1-
and 2-byte data elements to the far heap, replacing them with 2-byte
segment addresses. Not only does this NOT save you space in DGROUP
V.S. /Gt3, but it will increase the overall size of the executable
V.S. /Gt3 as you also have to pay 2 bytes in the far heap per data
element moved. Another reason to use /Gt3 over /Gt0 is that although
the size of DGROUP will remain the same, /Gt0 will cause character and
integer data elements to be addressed with far pointers, slowing
execution. With /Gt0, all that remains in DGROUP is the stack, several
kilobytes of variables associated with the run-time library, the near
heap (from which will be allocated some file buffers and the local
copy of the environment), and the 2-byte segment addresses for data
items moved out as needed.
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>