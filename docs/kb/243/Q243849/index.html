<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q243849: Nslookup &quot;ls&quot; Command Generates &quot;***Can’t List Domain&quot; Error | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q243849: Nslookup &quot;ls&quot; Command Generates &quot;***Can’t List Domain&quot; Error" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/243/Q243849/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/243/Q243849/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q243849: Nslookup &quot;ls&quot; Command Generates &quot;***Can’t List Domain&quot; Error","url":"http://jeffpar.github.io/kbarchive/kb/243/Q243849/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q243849-nslookup-ls-command-generates-cant-list-domain-error">Q243849: Nslookup "ls" Command Generates "***Can’t List Domain" Error</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q243849
Product(s): Microsoft Windows NT
Version(s): winnt:4.0
Operating System(s): 
Keyword(s): kberrmsg kbtool kbWinNT400PreSP7Fix
Last Modified: 06-AUG-2002

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft Windows NT Server version 4.0 
- Microsoft Windows NT Server, Enterprise Edition version 4.0 
-------------------------------------------------------------------------------

SYMPTOMS
========

When you use the "ls" command with the Nslookup tool, you may receive the
following error message:

  ***Can't list domain &lt;name&gt;: Query refused

WORKAROUND
==========

To work around this problem, type the TCP/IP address of the local Domain Name
System (DNS) server in the notify list. The Nslookup "ls" command then runs
successfully. However, DNS logs warning event 7062 once in the Event log:

  DNS Server encountered a packet addressed to itself -- IP address
  &lt;w.x.y.z&gt;.
  The DNS server should never be sending a packet to itself. This situation
  usually indicates a configuration error.

For additional information, click the article number below to view the article in
the Microsoft Knowledge Base:

  Q218814 DNS Server Logs Event 7062: 'DNS Server Encountered a Packet...'

RESOLUTION
==========

A supported fix is now available from Microsoft, but it is only intended to
correct the problem that is described in this article. Apply it only to systems
that are experiencing this specific problem.

To resolve this problem, contact Microsoft Product Support Services to obtain the
fix. For a complete list of Microsoft Product Support Services phone numbers and
information about support costs, visit the following Microsoft Web site:

  http://support.microsoft.com/default.aspx?scid=fh;EN-US;CNTACTMS

NOTE: In special cases, charges that are ordinarily incurred for support calls
may be canceled if a Microsoft Support Professional determines that a specific
update will resolve your problem. The usual support costs will apply to
additional support questions and issues that do not qualify for the specific
update in question.

The English-language version of this fix should have the following file
attributes or later:

  Date      Time    Version      Size    File name     Platform
  -------------------------------------------------------------
  11/05/99  04:42p               178,448 Dns.exe       x86
  11/05/99  04:41p               299,280 Dns.exe       Alpha



STATUS
======

Microsoft has confirmed that this is a problem in the Microsoft products that
are listed at the beginning of this article.

MORE INFORMATION
================

The error message described above occurs under the following circumstances:

- You run the Nslookup "ls" command locally on your DNS server to list a local
  domain.

- The "Only Allow Access from Secondaries Included on Notify List" option is
  enabled on your DNS server's zone, and the DNS server's local TCP/IP address
  is not entered in the notify list.

In this case, DNS assumes that a query of a non-authorized DNS server is received
and the error message is returned.

The hotfix allows the Nslookup "ls" command to return successfully without adding
the local TCP/IP address to the notify list. However, the following messages are
logged in the Event log:

  6000 (Informational) DNS_EVENT_ZONEXFR_START
  DNS Server initiating transfer of zone %1 to DNS server at %2.

  6001 (Informational) DNS_EVENT_ZONEXFR_SUCCESSFUL
  DNS Server transfer of zone %1 to DNS server at %2, successfully completed.

NOTE: If you use the hotfix and unnecessarily add the local TCP/IP address to the
DNS server's notify list, warning 7062 is still logged in the Event log once for
every zone to which this applies. When you restart the DNS server, you also
receive the warning once for every zone that has the server's local address in
its notify list.

Additional query words:

======================================================================
Keywords          : kberrmsg kbtool kbWinNT400PreSP7Fix 
Technology        : kbWinNTsearch kbWinNT400search kbWinNTSsearch kbWinNTSEntSearch kbWinNTSEnt400 kbWinNTS400search kbWinNTS400
Version           : winnt:4.0
Hardware          : ALPHA x86
Issue type        : kbbug
Solution Type     : kbfix

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>