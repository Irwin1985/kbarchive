<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q243469: Cluster SMB Share Resource Causes Momentary Disconnection | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q243469: Cluster SMB Share Resource Causes Momentary Disconnection" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/243/Q243469/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/243/Q243469/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q243469: Cluster SMB Share Resource Causes Momentary Disconnection","url":"http://jeffpar.github.io/kbarchive/kb/243/Q243469/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q243469-cluster-smb-share-resource-causes-momentary-disconnection">Q243469: Cluster SMB Share Resource Causes Momentary Disconnection</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q243469
Product(s): Microsoft Windows NT
Version(s): winnt:4.0 SP4,4.0 SP5
Operating System(s): 
Keyword(s): kbWinNT400PreSP7Fix
Last Modified: 06-AUG-2002

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft Windows NT Server, Enterprise Edition versions 4.0 SP4, 4.0 SP5 
- Microsoft Cluster Server 
-------------------------------------------------------------------------------

SYMPTOMS
========

When you share folders on a shared cluster drive with the Share Subdirectories
feature introduced in Service Pack 4, some or all of your folder names may end
with a dollar sign (for example, &lt;Foldername&gt;$). Because these shares are
automatically hidden, you are not using the Hidden option for the file share
resource itself. In this situation, users connected to these shares may be
intermittently disconnected.

CAUSE
=====

When a change in the folder structure is detected, Cluster Server scans for
folders that have been deleted to remove the appropriate share. When a dollar
sign is used as the last character in a folder name, Cluster Server assumes that
it created the share as a hidden share. Therefore, it scans for the folder name
without the dollar sign and removes the share when it cannot find the folder
name without the dollar sign. Then, the folder is shared again when Cluster
Server scans for new non-shared folders.

RESOLUTION
==========

A supported fix is now available from Microsoft, but it is only intended to
correct the problem that is described in this article. Apply it only to systems
that are experiencing this specific problem.

To resolve this problem, contact Microsoft Product Support Services to obtain the
fix. For a complete list of Microsoft Product Support Services phone numbers and
information about support costs, visit the following Microsoft Web site:

  http://support.microsoft.com/default.aspx?scid=fh;EN-US;CNTACTMS

NOTE: In special cases, charges that are ordinarily incurred for support calls
may be canceled if a Microsoft Support Professional determines that a specific
update will resolve your problem. The usual support costs will apply to
additional support questions and issues that do not qualify for the specific
update in question.

The English-language version of this fix should have the following file
attributes or later:

  File Name     Platform
  ----------------------
  Clusres.dll   Alpha
  Clusres.dll   Intel



WORKAROUND
==========

To work around this problem, rename the folders so that they do not end with a
dollar sign. To create the shares as hidden, use the Hidden option in the file
share resource instead.

MORE INFORMATION
================

For additional information, click the article numbers below to view the articles
in the Microsoft Knowledge Base:

  Q185212 Cluster Server Does Not Support More than 900 Shares

  Q194831 Cluster Shares Must Be Reset to Recognize Added Subdirectories

If you enable cluster logging, you see the following entries:

  0bc.034::28-12:54:40.138 File Share &lt;user1$&gt;:
  SmbpCheckForSubDirDeletion: Dir 'u:\test$\user1' not found ...
  0bc.034::28-12:54:40.138 File Share &lt;user1$&gt;:
  SmbpCheckForSubDirDeletion: Removing share 'user1$'...
  ...
  0bc.034::28-12:54:46.826 File Share &lt;user1$&gt;:
  SmbpCheckAndBringSubSharesOnline: Adding share 'user1$'...

Additional query words:

======================================================================
Keywords          : kbWinNT400PreSP7Fix 
Technology        : kbWinNTsearch kbWinNT400search kbWinNTSsearch kbWinNTSEntSearch kbWinNTSEnt400sp5 kbWinNTSEnt400sp4 kbWinNTS400search kbAudDeveloper kbClustServSearch
Version           : winnt:4.0 SP4,4.0 SP5
Issue type        : kbbug
Solution Type     : kbfix

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>