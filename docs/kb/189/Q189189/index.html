<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q189189: SMS: Fiperf.bat - Add SMS File Counters to Performance Monitor | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q189189: SMS: Fiperf.bat - Add SMS File Counters to Performance Monitor" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/189/Q189189/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/189/Q189189/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q189189: SMS: Fiperf.bat - Add SMS File Counters to Performance Monitor","url":"http://jeffpar.github.io/kbarchive/kb/189/Q189189/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q189189-sms-fiperfbat---add-sms-file-counters-to-performance-monitor">Q189189: SMS: Fiperf.bat - Add SMS File Counters to Performance Monitor</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q189189
Product(s): Microsoft Systems Management Server
Version(s): winnt:1.2
Operating System(s): 
Keyword(s): kbsmsUtil smsutil
Last Modified: 31-JUL-2001

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft Systems Management Server version 1.2 
-------------------------------------------------------------------------------

SUMMARY
=======

Fiperf.bat, a utility that is available in the Microsoft BackOffice Resource
Kit, adds counters to Performance Monitor that monitor the number, size, and age
of files in various directories. This is particularly useful in Systems
Management Server to monitor directories such as
Ms\Site.srv\Dataload.box\Deltamif.col.

The name of the new Performance Monitor object is SMS_Files. Review the Explain
text in Performance Monitor for definitions of the counters.

FIPERF must be run on the computer running the Systems Management Server site
services.

MORE INFORMATION
================

Usage Notes
-----------

Do not run these counters with a polling interval that is too small. Doing so
adversely affects server performance because the server continuously scans
directories. Although one minute is a reasonable minimum polling interval, one
hour is recommended.

The directories that are monitored are stored in the
\\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\SMS_Files\Linkage registry key.
You can add or remove items from this list as needed.

In Performance Monitor, when you bring up a list of counters, the counter DLLs
are called to return data (a scan of all the directories is performed). If these
directories have many files, the scan may take from a few seconds to a few
minutes. If there is a large delay and there are directories that you do not
want to monitor, remove them from the Linkage key.

Removing FIPERF
---------------

To remove this software, run the following command:

     unlodctr SMS_Files

Unlodctr is provided with Windows NT Server.

NOTE: Do not simply delete the registry keys. Doing so may cause you to lose
other Performance Monitor counters.

Runs on Alpha, MIPS, and x86.

Files Required for FIPERF
-------------------------

  Fiperf.dll
  Smsperf.dll

The following files are required to install the SMS_Files counter, but can safely
be removed after installation:

  Fiperf.bat
  Fictrnm.h
  Fi.ini

FIPERF Syntax
-------------

To run the FIBPERF utility, use the following syntax

  fiperf &lt;path&gt;

where &lt;path&gt; is the path to the root SMS directory, for example, D:\SMS.

Additional query words: prodsms

======================================================================
Keywords          : kbsmsUtil smsutil 
Technology        : kbSMSSearch kbSMS120
Version           : winnt:1.2
Issue type        : kbinfo

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>