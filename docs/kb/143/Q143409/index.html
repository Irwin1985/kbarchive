<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/kbarchive/assets/css/style.css?v=d2057ae472d963fbdcbf65805f43123bccb709dc">
    <link rel="stylesheet" type="text/css" href="/kbarchive/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Q143409: DOC: CFile::GetFileTitle May Return with File Extension | KnowledgeBase Archive</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Q143409: DOC: CFile::GetFileTitle May Return with File Extension" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<meta property="og:description" content="An Archive of Early Microsoft KnowledgeBase Articles" />
<link rel="canonical" href="http://jeffpar.github.io/kbarchive/kb/143/Q143409/" />
<meta property="og:url" content="http://jeffpar.github.io/kbarchive/kb/143/Q143409/" />
<meta property="og:site_name" content="KnowledgeBase Archive" />
<script type="application/ld+json">
{"headline":"Q143409: DOC: CFile::GetFileTitle May Return with File Extension","url":"http://jeffpar.github.io/kbarchive/kb/143/Q143409/","description":"An Archive of Early Microsoft KnowledgeBase Articles","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1><a href="/kbarchive">KnowledgeBase Archive</a></h1>
            <h2>An Archive of Early Microsoft KnowledgeBase Articles</h2>
        </header>
        <section id="downloads" class="clearfix">
            
            
            <a href="https://github.com/jeffpar/kbarchive" id="view-on-github" class="button"><span>View on GitHub</span></a>
            
        </section>
        <hr>
        <section id="main_content">
                <div>
        <h2 id="q143409-doc-cfilegetfiletitle-may-return-with-file-extension">Q143409: DOC: CFile::GetFileTitle May Return with File Extension</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article: Q143409
Product(s): Microsoft C Compiler
Version(s): winnt:4.0; :
Operating System(s): 
Keyword(s): kbdocfix kbFileIO kbMFC kbVC400bug kbVC410fix kbGrpDSMFCATL
Last Modified: 07-MAY-2001

-------------------------------------------------------------------------------
The information in this article applies to:

- Microsoft Visual C++, version 4.0 
- Microsoft Foundation Classes (MFC) 
-------------------------------------------------------------------------------

SUMMARY
=======

Using the GetFileTitle() CFile member function to return the file's title may
return the extension as well. However, the documentation for this member
function does not fully describe this "by design" behavior.

This was corrected in Visual C++ 4.1.

MORE INFORMATION
================

The behavior of CFile::GetFileTitle() member function has changed in Windows 95.
The expected behavior is described here.

From the Win32 SDK GetFileTitle() documentation:

In Windows 95, the GetFileTitle() function retrieves the same text that the
system would compose in displaying a file name to the user. This text is
intended to be used for display purposes only and is in accordance with the
user's preferences for display of filenames. There are two important
implications of this enhancement: First, an application cannot expect to use the
resultant text to call file system functions because it is merely a display
name; Second, in preserving the function's "insufficient buffer" case, the
return value for that code path reflects the size of the text that would be
composed in the normal case such that the caller may attempt to allocate
sufficient storage and retrieve the result with a subsequent call to
GetFileTitle(). More generally, there is no guaranteed connection between the
resultant text or return value and the characters in the original buffer passed
by the application.

In porting applications to Windows 95, you need to update any code that relies on
such behavior in previous versions of the operating system. The most common case
is code that deliberately calls GetFileTitle() with a NULL return buffer,
passing size 0, and then uses the return value as an index into the original
string. This technique is no longer supported. Applications can usually achieve
similar results (and superior performance) with run-time library functions such
as strrchr, wcsrchr, and _mbsrchr.

Additional query words: dskbsweep 4.00 4.10

======================================================================
Keywords          : kbdocfix kbFileIO kbMFC kbVC400bug kbVC410fix kbGrpDSMFCATL 
Technology        : kbVCsearch kbVC400 kbAudDeveloper kbMFC
Version           : winnt:4.0; :

=============================================================================
</code></pre></div></div>


        <p>
            THE INFORMATION PROVIDED IN THE MICROSOFT KNOWLEDGE BASE IS
            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND.  MICROSOFT DISCLAIMS
            ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES
            OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  IN NO
            EVENT SHALL MICROSOFT CORPORATION OR ITS SUPPLIERS BE LIABLE FOR
            ANY DAMAGES WHATSOEVER INCLUDING DIRECT, INDIRECT, INCIDENTAL,
            CONSEQUENTIAL, LOSS OF BUSINESS PROFITS OR SPECIAL DAMAGES, EVEN IF
            MICROSOFT CORPORATION OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE
            POSSIBILITY OF SUCH DAMAGES.  SOME STATES DO NOT ALLOW THE EXCLUSION
            OR LIMITATION OF LIABILITY FOR CONSEQUENTIAL OR INCIDENTAL DAMAGES
            SO THE FOREGOING LIMITATION MAY NOT APPLY.
        </p>
        <p>Copyright Microsoft Corporation 1986-2002.</p>
    </div>

        </section>

        <footer>
            
            KnowledgeBase Archive is maintained by <a href="https://www.pcjs.org">PCjs</a>.<br>
            
            This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

    </div>
</div>


<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-49658648-3', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>